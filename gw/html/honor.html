<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>深圳市爱华勘测工程有限公司-资质荣誉</title>
  <link rel="stylesheet" href="../css/public/common.css" type="text/css">
  <link rel="stylesheet" href="https://unpkg.com/viewerjs/dist/viewer.css" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <link rel="stylesheet" href="../css/public/header.css" type="text/css">
  <link rel="stylesheet" href="../css/public/search.css" type="text/css">
  <link rel="stylesheet" href="../css/public/nav.css" type="text/css">
  <link rel="stylesheet" href="../css/honor.css" type="text/css">
  <link rel="stylesheet" href="../css/public/route.css" type="text/css">
  <link rel="stylesheet" href="../css/public/tab.css" type="text/css">
  <link rel="stylesheet" href="../css/public/content.css" type="text/css">
  <link rel="stylesheet" href="../css/public/footer.css" type="text/css">
</head>

<body>
  <div class="boss">
    <!------------------------------头部---------------------------------->
    <div class="bg_header">
      <div class="header">
        <div class="header_left">
          <p id="header_tip">欢迎进入深圳爱华勘测工程有限公司！</p>
        </div>
        <div class="header_right">
          <ul class="header_ul">
            <li>联系我们</li>
            <li>中文</li>
            <li>English</li>
          </ul>
        </div>
      </div>
    </div>
    <!------------------------------logo & search---------------------------------->
    <div class="bg_search">
      <div class="search">
        <div class="search_left">
          <img src="../imgs/logo.jpg" alt="" class="logo">
        </div>
        <div class="search_right">
          <div class="search_box">
            <input id="search_input" type="text" placeholder="请输入关键词">
            <div id="search_btn" onclick="handelSearch()"></div>
          </div>
        </div>
      </div>
    </div>
    <!------------------------------导航---------------------------------->
    <div class="bg_nav">
      <div class="nav">
        <ul class="nav_ul">
          <li>
            <a href="./home.html" target="_blanck">网站首页</a>
          </li>
          <li>
            <a href="./about.html?tabIndex=0" target="_blanck">关于爱华</a>
            <ol>
              <li>
                <a href="./about.html?tabIndex=1" target="_blanck">公司简介</a>
                <a href="./about.html?tabIndex=2" target="_blanck">发展历程</a>
                <a href="./about.html?tabIndex=3" target="_blanck">组织架构</a>
                <a href="./about.html?tabIndex=4" target="_blanck">业务辐射</a>
              </li>
            </ol>
          </li>
          <li>
            <a href="./honor.html?tabIndex=0">资质荣誉</a>
            <ol>
              <li>
                <a href="./honor.html?tabIndex=1">资质资信</a>
                <a href="./honor.html?tabIndex=2">获奖证书(部分)</a>
              </li>
            </ol>
          </li>
          <li>
            <a href="./business-area.html?tabIndex=0" target="_blanck">业务领域</a>
            <ol>
              <li>
                <a href="./business-area.html?tabIndex=1" target="_blanck">测绘工程</a>
                <a href="./business-area.html?tabIndex=2" target="_blanck">地理信息</a>
                <a href="./business-area.html?tabIndex=3" target="_blanck">工程勘察</a>
                <a href="./business-area.html?tabIndex=4" target="_blanck">土地规划</a>
                <a href="./business-area.html?tabIndex=5" target="_blanck">地址勘察</a>
                <a href="./business-area.html?tabIndex=6" target="_blanck">地质灾害</a>
                <a href="./business-area.html?tabIndex=7" target="_blanck">信息系统集成及服务</a>
              </li>
            </ol>
          </li>
          <li>
            <a href="./project-performance.html?tabIndex=0" target="_blanck">工程业绩</a>
            <ol>
              <li>
                <a href="./project-performance.html?tabIndex=1" target="_blanck">各类项目业绩</a>
              </li>
            </ol>
          </li>
          <li>
            <a href="./news.html?tabIndex=0" target="_blanck">新闻动态</a>
            <ol>
              <li>
                <a href="./news.html?tabIndex=1" target="_blanck">公司新闻</a>
                <a href="./news.html?tabIndex=2" target="_blanck">行业新闻</a>
                <a href="./news.html?tabIndex=3" target="_blanck">企业公告</a>
              </li>
            </ol>
          </li>
          <li>
            <a href="./company-culture.html?tabIndex=0" target="_blanck">企业文化</a>
            <ol>
              <li>
                <a href="./company-culture.html?tabIndex=1" target="_blanck">企业文化</a>
                <a href="./company-culture.html?tabIndex=2" target="_blanck">爱华之歌</a>
                <a href="./company-culture.html?tabIndex=3" target="_blanck">爱华人报</a>
                <a href="./company-culture.html?tabIndex=4" target="_blanck">职工园地</a>
                <a href="./company-culture.html?tabIndex=5" target="_blanck">培训学习</a>
                <a href="./company-culture.html?tabIndex=6" target="_blanck">公益慈善</a>
                <a href="./company-culture.html?tabIndex=7" target="_blanck">党建工会</a>
              </li>
            </ol>
          </li>
          <li>
            <a href="./contact.html?tabIndex=0" target="_blanck">联系我们</a>
            <ol>
              <li>
                <a href="./contact.html?tabIndex=1" target="_blanck">联系我们</a>
                <a href="./contact.html?tabIndex=2" target="_blanck">加入我们</a>
                <a href="./contact.html?tabIndex=3" target="_blanck">业务咨询</a>
                <a href="./contact.html?tabIndex=4" target="_blanck">法律声明</a>
                <a href="./contact.html?tabIndex=5" target="_blanck">沟通平台</a>
              </li>
            </ol>
          </li>
        </ul>
      </div>
    </div>
    <!------------------------------banner---------------------------------->
    <div class="banner"></div>
    <!------------------------------route---------------------------------->
    <div class="bg_route">
      <div class="route">
        <ul class="route_ul">
          <li>您现在所在的位置：</li>
        </ul>
      </div>
    </div>
    <!------------------------------content---------------------------------->
    <div class="bg_content">
      <div class="content">
        <ul class="tab_ul">
          <li class="active"><a href="./honor.html?tabIndex=1">资质资信</a></li>
          <li><a href="./honor.html?tabIndex=2">获奖证书(部分)</a></li>
        </ul>
        <div class="content_item">
          <div class="item_box" id="item_box_1">
            <ul id="imgs_1"></ul>
          </div>
          <div class="item_box" id="item_box_2">
            <ul id="imgs_2"></ul>
          </div>
        </div>
        <ul class="pagination justify-content-center">
          <!-- <li class="page-item">
                        <a class="page-link" href="#" tabindex="-1" aria-disabled="true">上一页</a>
                    </li>
                    <li class="page-item"><a class="page-link" href="#">1</a></li>
                    <li class="page-item active" aria-current="page">
                        <a class="page-link" href="#">2 <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item">
                        <a class="page-link" href="#">下一页</a>
                    </li> -->
        </ul>
      </div>
    </div>
    <!------------------------------尾部---------------------------------->
    <div class="bg_footer">
      <div class="footer">
        <ul class="footer_nav">
          <li><a href="./about.html?tabIndex=0" target="_blanck">关于爱华</a></li>
          <li><a href="./honor.html?tabIndex=0">资质荣誉</a></li>
          <li><a href="./business-area.html?tabIndex=0" target="_blanck">业务领域</a></li>
          <li><a href="./project-performance.html?tabIndex=0" target="_blanck">工程业绩</a></li>
          <li><a href="./news.html?tabIndex=0" target="_blanck">新闻动态</a></li>
          <li><a href="./company-culture.html?tabIndex=0" target="_blanck">企业文化</a></li>
          <li><a href="./contact.html?tabIndex=0" target="_blanck">联系我们</a></li>
        </ul>
        <p>
          联系电话：0755-83512114、83467794　　　　传真：0755-83512114　　　　Email：<a
            href="mailto:szahkc@126.com">szahkc@126.com</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          &nbsp;QQ：408667398<br />深圳市龙岗区平湖街道平湖社区平安大道1号华南城铁东物流区13栋16层
        </p>
      </div>
      <div class="copyright">深圳市爱华勘测工程有限公司页面版权所有&nbsp;&nbsp;
        <a href="http://beian.miit.gov.cn/" target="_blanck">粤ICP备17026116号</a>&nbsp;&nbsp;
        <a href="#" target="_blanck">网站建设:切图仔</a>
      </div>
    </div>
  </div>

</body>

<script src="../js/jquery-1.10.1.min.js"></script>
<script src="../js/viewer.js"></script>
<script src="../js/jquery-viewer.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
  integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js"
  integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
<script src="../js/header.js"></script>
<script type="module">
  import route from "../js/route.js";
  import { initRoute, handleChangeTab, createImgList, createPagination } from "../js/libs.js";

  let url = location.href.split("?")[0];
  let tabIndex = location.search.split("=")[1];
  let honorRoute = route.honorRoute;

  // 页码,页大小,总页数
  let pageIndex, pageSize, pageTotal;

  // 图片基路径
  let imgBaseUrl = "../imgs/honor";
  // 图片列表
  let qualificationImgList = [
    { src: `${imgBaseUrl}/qualification_pic/pic_01.jpg`, title: "营、税、组合一正本" },
    { src: `${imgBaseUrl}/qualification_pic/pic_02.jpg`, title: "甲级测绘资质正本" },
    { src: `${imgBaseUrl}/qualification_pic/pic_03.jpg`, title: "勘察资质正本" },
    { src: `${imgBaseUrl}/qualification_pic/pic_04.jpg`, title: "固体勘察资质正本" },
    { src: `${imgBaseUrl}/qualification_pic/pic_05.jpg`, title: "土地规划修编资质正本" },
    { src: `${imgBaseUrl}/qualification_pic/pic_06.jpg`, title: "计算机系统集成及服务资质" },

    { src: `${imgBaseUrl}/qualification_pic/pic_01.jpg`, title: "营、税、组合一正本" },
    { src: `${imgBaseUrl}/qualification_pic/pic_02.jpg`, title: "甲级测绘资质正本" },
    { src: `${imgBaseUrl}/qualification_pic/pic_03.jpg`, title: "勘察资质正本" },
    { src: `${imgBaseUrl}/qualification_pic/pic_04.jpg`, title: "固体勘察资质正本" },
    { src: `${imgBaseUrl}/qualification_pic/pic_05.jpg`, title: "土地规划修编资质正本" },
    { src: `${imgBaseUrl}/qualification_pic/pic_06.jpg`, title: "计算机系统集成及服务资质" },
  ];
  let honorImgList = [
    { src: `${imgBaseUrl}/honor_pic/pic_01.jpg`, title: "2019年地理信息科技进步奖" },
    { src: `${imgBaseUrl}/honor_pic/pic_02.jpg`, title: "第十八届深圳市优秀工程勘察设计综合工程一等奖" },
    { src: `${imgBaseUrl}/honor_pic/pic_03.jpg`, title: "2017中国地理信息产业优秀工程银奖" },
    { src: `${imgBaseUrl}/honor_pic/pic_04.jpg`, title: "2017年全国优秀测绘工程奖铜奖" },
    { src: `${imgBaseUrl}/honor_pic/pic_05.jpg`, title: "2016全国优秀工程奖铜奖" },
    { src: `${imgBaseUrl}/honor_pic/pic_06.jpg`, title: "2015全国优秀工程奖铜奖" },
    { src: `${imgBaseUrl}/honor_pic/pic_07.jpg`, title: "2014全国优秀工程奖铜奖" },
    { src: `${imgBaseUrl}/honor_pic/pic_08.jpg`, title: "2013广东省优秀工程奖三等奖" },
    { src: `${imgBaseUrl}/honor_pic/pic_09.jpg`, title: "2013全国优秀工程奖铜奖" },
    { src: `${imgBaseUrl}/honor_pic/pic_10.jpg`, title: "2012全国优秀工程奖铜奖" },
    { src: `${imgBaseUrl}/honor_pic/pic_11.jpg`, title: "2011全国优秀工程奖铜奖" },
    { src: `${imgBaseUrl}/honor_pic/pic_12.jpg`, title: "第十三届优秀工程勘察设计工程测量二等奖" },
    { src: `${imgBaseUrl}/honor_pic/pic_13.jpg`, title: "表扬奖" }
  ];

  let $imgs_1 = $("#imgs_1"), $imgs_2 = $("#imgs_2");

  $(document).ready(function () {
    // 初始化当前所在位置
    initRoute(honorRoute);
    switch (tabIndex) {
      case "0":
        honorRoute.splice(2, 0);
        handleChangeTab(tabIndex);
        break;
      case "1":
        honorRoute.splice(2, 0, { path: "./honor.html", name: "资质资信 >>", query: `tabIndex=${tabIndex}`, target: "" });
        handleChangeTab(tabIndex);
        break;
      case "2":
        honorRoute.splice(2, 0, { path: "./honor.html", name: "获奖证书(部分) >>", query: `tabIndex=${tabIndex}`, target: "" });
        handleChangeTab(tabIndex);
        break;
      default:
        honorRoute.splice(2, 0);
        handleChangeTab(tabIndex);
    }

    // 如果sessionStorage存了页码 就获取页码 否则页码初始化
    if (sessionStorage.getItem("pageIndex")) {
      pageIndex = JSON.parse(sessionStorage.getItem("pageIndex"))
    } else {
      pageIndex = 1;
    }

    if (tabIndex == 0 || tabIndex == 1) {
      pageSize = 8;
      pageTotal = Math.ceil(qualificationImgList.length / pageSize);
    } else {
      pageSize = 16;
      pageTotal = Math.ceil(honorImgList.length / pageSize);
    }

    initImgList(getCurrentImgList(tabIndex, pageIndex, pageSize), tabIndex);

    let str = createPagination(url, tabIndex, pageTotal, pageIndex);
    $(".pagination").html(str);
    initPagination(pageIndex, pageTotal)
  })

  // 初始化分页
  const initPagination = (pageIndex, pageTotal) => {
    // 判断上一页 下一页是否可点
    if (pageTotal === 1) {
      $(".pagination li").first().addClass("disabled");
      $(".pagination li").last().addClass("disabled");
    } else {
      if (pageIndex === 1) {
        $(".pagination li").first().addClass("disabled");
      } else {
        $(".pagination li").first().removeClass("disabled");
      }

      if (pageIndex === pageTotal) {
        $(".pagination li").last().addClass("disabled");
      } else {
        $(".pagination li").last().removeClass("disabled");
      }
    }

    // 设置当前页为选中状态
    $(".pagination li").each((index, item) => {
      if ($(item).attr("class").indexOf("active") != -1) {
        $(item).removeClass("active")
      }
    });
    $(".pagination li").eq(pageIndex).addClass("active");
  }

  // 切换页码
  $(".pagination").delegate("li", "click", e => {
    let pageText = $(e.target).children().html();
    console.log(pageText)
    if (pageText === "上一页") {
      pageIndex -= 1;
      initPagination(pageIndex, pageTotal);
      initImgList(getCurrentImgList(tabIndex, pageIndex, pageSize), tabIndex);
    } else if (pageText === "下一页") {
      pageIndex += 1;
      initPagination(pageIndex, pageTotal);
      initImgList(getCurrentImgList(tabIndex, pageIndex, pageSize), tabIndex);
    } else {
      pageIndex = pageText * 1;
      initPagination(pageIndex, pageTotal);
      initImgList(getCurrentImgList(tabIndex, pageIndex, pageSize), tabIndex);
    }
    // 每次切换页码存到sessionStorage
    sessionStorage.setItem("pageIndex", JSON.stringify(pageIndex));
  })

  // 切换tab,分页生成 图片列表
  const getCurrentImgList = (tabIndex, pageIndex, pageSize) => {
    switch (tabIndex) {
      case "0":
        return qualificationImgList.slice((pageIndex - 1) * (pageSize - 1), (pageIndex - 1) * (pageSize - 1) + pageSize);
        break;
      case "1":
        return qualificationImgList.slice((pageIndex - 1) * (pageSize - 1), (pageIndex - 1) * (pageSize - 1) + pageSize);
        break;
      case "2":
        return honorImgList.slice((pageIndex - 1) * (pageSize - 1), (pageIndex - 1) * (pageSize - 1) + pageSize);
        break;
      default: return qualificationImgList.slice((pageIndex - 1) * (pageSize - 1), (pageIndex - 1) * (pageSize - 1) + pageSize);
    }
  }

  // 渲染图片
  const initImgList = (imgList, tabIndex) => {
    switch (tabIndex) {
      case "0":
        createImgList(imgList, tabIndex);
        $imgs_1.viewer();
        break;
      case "1":
        createImgList(imgList, tabIndex);
        $imgs_1.viewer();
        break;
      case "2":
        createImgList(imgList, tabIndex);
        $imgs_2.viewer();
        break;
      default:
        createImgList(imgList, tabIndex);
        $imgs_1.viewer();
    }
  }
</script>

</html>